@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Fonts (DM Sans + Fraunces, matching web2.html) ─── */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,500;0,9..144,600;0,9..144,700;1,9..144,400&display=swap');

/* ─── Design tokens (from web2.html T object) ─── */
:root {
  --cream: #FDFBF8;
  --coral-p: #FF6B4A;
  --coral-s: #FF8A6A;
  --coral-soft: #FFB89A;
  --coral-airy: #FFF5F0;
  --coral-cream: #FFFBFA;
  --blue-p: #5C8BFF;
  --blue-s: #7AA3FF;
  --blue-soft: #A8C4FF;
  --blue-airy: #E6F0FF;
  --purple-p: #8F6BF7;
  --purple-s: #9B7DF9;
  --purple-soft: #D4C5FF;
  --purple-airy: #F0ECFF;
  --honey-p: #FFD75A;
  --honey-s: #FFE073;
  --honey-soft: #FFEEB0;
  --honey-airy: #FFFBF0;
  --career-p: #7DD3FC;
  --career-s: #9BDFFD;
  --career-soft: #C0EBFE;
  --career-airy: #EAF8FF;
  --love-p: #FFB8D0;
  --love-s: #FFCBDD;
  --love-soft: #FFE0EB;
  --love-airy: #FFF6F9;
  --wealth-p: #F2D94D;
  --wealth-s: #F7E36B;
  --wealth-soft: #FAEEB0;
  --wealth-airy: #FDF9E6;
  --study-p: #7DDFBD;
  --study-s: #9BE8CF;
  --study-soft: #C0F0E0;
  --study-airy: #E8FBF5;
  --social-p: #B8A4FF;
  --social-s: #CBBAFE;
  --social-soft: #E0D4FF;
  --social-airy: #F4F1FF;
  --text-primary: #1E1E1E;
  --text-secondary: #4B4B4B;
  --text-tertiary: #6F6F6F;
  --text-quaternary: #999999;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
  height: 100%;
  width: 100%;
  overflow: hidden;
  background: var(--cream);
  color: var(--text-primary);
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.08); border-radius: 4px; }

/* ─── Animations ─── */

@keyframes orbDrift {
  0%,100% { transform: translate(0,0) scale(1); }
  33% { transform: translate(18px,-12px) scale(1.03); }
  66% { transform: translate(-12px,10px) scale(0.97); }
}

@keyframes orbFloat {
  0%,100% { transform: translate(0,0) scale(1); }
  25% { transform: translate(10px,-14px) scale(1.04); }
  50% { transform: translate(-8px,12px) scale(0.96); }
  75% { transform: translate(14px,6px) scale(1.02); }
}

@keyframes blobBreathe {
  0%,100% { transform: scale(1) translateY(0); }
  50% { transform: scale(1.018) translateY(-3px); }
}

@keyframes blobGlow {
  0%,100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.12); }
}

@keyframes healingCardGlow {
  0%,100% { filter: brightness(1) drop-shadow(0 0 0 transparent); }
  50% { filter: brightness(1.06) drop-shadow(0 0 10px rgba(255,138,106,0.4)); }
}

@keyframes tarotNameIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0%,100% { opacity: 1; }
  50% { opacity: 0.3; }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes chipEnter {
  from { opacity: 0; transform: translateY(4px) scale(0.97); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes pulseDot {
  0%,80%,100% { opacity: .3; transform: scale(.8); }
  40% { opacity: 1; transform: scale(1); }
}

.animate-fade-up { animation: fadeUp 0.3s ease-out forwards; }
.animate-slide-up { animation: slideUp 0.3s ease; }
.animate-chip-enter { animation: chipEnter 0.35s cubic-bezier(.22,1,.36,1) forwards; }
.animate-tarot-name { animation: tarotNameIn 0.8s ease; }

.shimmer-block {
  background: linear-gradient(90deg, rgba(0,0,0,0.03) 25%, rgba(0,0,0,0.06) 50%, rgba(0,0,0,0.03) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

.pulse-dot:nth-child(1) { animation: pulseDot 1.4s ease-in-out infinite; }
.pulse-dot:nth-child(2) { animation: pulseDot 1.4s ease-in-out .2s infinite; }
.pulse-dot:nth-child(3) { animation: pulseDot 1.4s ease-in-out .4s infinite; }

/* Hide scrollbar for fortune scroll area */
.fortune-scroll { scrollbar-width: none; -ms-overflow-style: none; }
.fortune-scroll::-webkit-scrollbar { display: none; }

/* ─── CopilotKit overrides (adapted to new palette) ─── */

:root {
  --copilot-kit-primary-color: #FF6B4A;
  --copilot-kit-contrast-color: #ffffff;
  --copilot-kit-background-color: transparent;
  --copilot-kit-secondary-color: #FFF5F0;
  --copilot-kit-secondary-contrast-color: #1E1E1E;
  --copilot-kit-response-button-background-color: #FFF5F0;
  --copilot-kit-response-button-color: #FF6B4A;
  --copilot-kit-separator-color: transparent;
  --copilot-kit-muted-color: #999999;
  --copilot-kit-input-background-color: transparent;
}

.copilotKitHeader { display: none !important; }

/* Chat panel: flex column, fill parent */
.copilot-chat-inner {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}
.copilot-chat-inner .copilotKitChat {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  background: transparent !important;
}

/* Messages area: scrollable, fill remaining space */
.copilotKitMessages {
  flex: 1 !important;
  min-height: 0 !important;
  overflow-y: auto !important;
  padding: 16px 16px 8px !important;
  background: transparent !important;
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}
.copilotKitMessages::-webkit-scrollbar { display: none !important; }

/* User message: bubble style */
.copilotKitMessage.copilotKitUserMessage {
  background: linear-gradient(135deg, var(--coral-s), var(--coral-p)) !important;
  color: #fff !important;
  border-radius: 18px 18px 4px 18px !important;
  padding: 11px 16px !important;
  font-size: 13.5px !important;
  line-height: 1.75 !important;
  max-width: 82% !important;
  animation: fadeUp 0.25s ease-out;
}

/* Assistant message: pure text, no bubble */
.copilotKitMessage.copilotKitAssistantMessage {
  background: transparent !important;
  color: var(--text-secondary) !important;
  border: none !important;
  border-radius: 0 !important;
  padding: 4px 2px !important;
  font-size: 13.5px !important;
  line-height: 1.75 !important;
  max-width: 92% !important;
  animation: fadeUp 0.25s ease-out;
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif !important;
}
.copilotKitAssistantMessage p { margin: 0 0 .5em 0; }
.copilotKitAssistantMessage p:last-child { margin-bottom: 0; }

/* Input container: no overlap, stick to bottom */
.copilotKitInputContainer {
  flex-shrink: 0 !important;
  padding: 8px 12px 14px !important;
  background: transparent !important;
}

/* Input box: clean rounded style, single row layout */
.copilotKitInput {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  background: rgba(255,255,255,0.6) !important;
  backdrop-filter: blur(16px) !important;
  -webkit-backdrop-filter: blur(16px) !important;
  border: 1px solid rgba(0,0,0,0.06) !important;
  border-radius: 22px !important;
  padding: 8px 12px !important;
  min-height: 44px !important;
  transition: border-color .2s, box-shadow .2s;
}
.copilotKitInput:focus-within {
  border-color: var(--coral-p) !important;
  box-shadow: 0 0 0 3px rgba(255,107,74,0.08) !important;
}

.copilotKitInput > textarea {
  flex: 1 !important;
  background: transparent !important;
  border: none !important;
  padding: 4px 0 !important;
  font-size: 13.5px !important;
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif !important;
  color: var(--text-primary) !important;
  resize: none !important;
  max-height: 120px !important;
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}
.copilotKitInput > textarea::-webkit-scrollbar { display: none !important; }
.copilotKitInput textarea::placeholder { color: var(--text-quaternary) !important; }

/* Controls: same row as textarea */
.copilotKitInputControls {
  display: flex !important;
  align-items: center !important;
  gap: 4px !important;
  flex-shrink: 0 !important;
}

/* Send button */
.copilotKitInputControls .copilotKitInputControlButton:not([disabled]) {
  color: var(--coral-p) !important;
}

/* Upload / attachment button */
.copilotKitInputControlButton {
  width: 28px !important;
  height: 28px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
}

.copilotKitTypingIndicator { color: var(--text-quaternary) !important; }

.copilotKitSuggestion {
  background: rgba(255,255,255,0.75) !important;
  border: 1px solid rgba(255,107,74,0.15) !important;
  border-radius: 100px !important;
  color: var(--coral-p) !important;
  font-size: 12px !important;
  transition: all .15s !important;
}
.copilotKitSuggestion:hover {
  border-color: var(--coral-p) !important;
  background: var(--coral-airy) !important;
}

/* Powered-by footer: hide */
.poweredByContainer { display: none !important; }

/* ─── Thinking bubble ─── */

.thinking-content {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  max-height: 200px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(0,0,0,0.06) transparent;
}
.thinking-content::-webkit-scrollbar { width: 3px; }
.thinking-content::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.06); border-radius: 3px; }

/* Markdown inside thinking bubble */
.thinking-content h1,.thinking-content h2,.thinking-content h3 { font-weight: 600; margin: .4em 0 .2em; }
.thinking-content h1 { font-size: 1.15em; }
.thinking-content h2 { font-size: 1.05em; }
.thinking-content h3 { font-size: .95em; }
.thinking-content p { margin: .25em 0; }
.thinking-content strong { font-weight: 600; }
.thinking-content em { font-style: italic; }
.thinking-content ul,.thinking-content ol { padding-left: 1.2em; margin: .25em 0; }
.thinking-content li { margin: .1em 0; }
.thinking-content code { background: rgba(0,0,0,0.04); padding: .1em .3em; border-radius: 3px; font-size: .9em; }
.thinking-content pre { background: rgba(0,0,0,0.03); padding: .5em; border-radius: 6px; overflow-x: auto; margin: .3em 0; }
.thinking-content pre code { background: none; padding: 0; }
.thinking-content blockquote { border-left: 2px solid rgba(0,0,0,0.08); padding-left: .6em; color: #aaa; margin: .3em 0; }
.thinking-content a { color: #999; text-decoration: underline; }
